![[Figure 14.22]]

atmospheric effects를 렌더링 하기 위해, [[Figure 14.22]]에 보이는 것과 같이 두가지 주요 요소를 설명해야 한다. 첫번째로, 우리는 파장 의존적인 Rayleigh scattering을 일으키는 공기 입자와 햇빛의 상호작용을 시뮬레이션 해야한다. 이것이 하늘의 색과 얇은 안개, 즉 *aerial perspective(공기의 원근)* 을 만들어 낸다. 두번째는, 지면 근처에 집중된 큰 입자들이 태양관에 미치는 효과가 필요하다. 이러한 큰 입자의 집중은 날씨나 오염과 같은 요소에 의존한다. 큰 입자는 파장 의존적인 Mie scattering을 만들어 낸다. 이러한 현상은 태양 주변에 밝은 헤일로를 만들어 낸다.

첫번째 물리 기반 대기 모델\[1285]은 우주에서 지구와 지구의 대기를 single scattering을 시뮬레이션 하여 렌더링 했다. 비슷한 결과를 O'Neil.을 방식\[1333]으로 만들수 있다. 지면에서 우주로 향하는 지구 렌더링은 single-pass shader를 사용한 ray marching 으로 달성할 수 있다. 비싼 Mie와 Rayleigh scattering ray marching 적분 계산은 sky dome을 렌더링 할때 vertex단위로 계산되었다. 그리고 시각적으로 고주파를 가지는 phase function은 pixel shader에서 계산 되었다. 이것은 부드럽게 보이게 만들고, 보간으로 인해 sky geometry가 드러나는 것을 방지할 수 있습니다. 또한 scattering 값을 텍스쳐에 저장하고 여러 프레임에 걸쳐 평가를 분산시킴으로써 동일한 결과를 얻는 것도 가능하며, 성능 향상을 위해 업데이트 지연을 수용하는 방식이다\[1871].

