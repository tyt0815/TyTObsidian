![[Figure 14.22]]

atmospheric effects를 렌더링 하기 위해, [[Figure 14.22]]에 보이는 것과 같이 두가지 주요 요소를 설명해야 한다. 첫번째로, 우리는 파장 의존적인 Rayleigh scattering을 일으키는 공기 입자와 햇빛의 상호작용을 시뮬레이션 해야한다. 이것이 하늘의 색과 얇은 안개, 즉 *aerial perspective(공기의 원근)* 을 만들어 낸다. 두번째는, 지면 근처에 집중된 큰 입자들이 태양관에 미치는 효과가 필요하다. 이러한 큰 입자의 집중은 날씨나 오염과 같은 요소에 의존한다. 큰 입자는 파장 의존적인 Mie scattering을 만들어 낸다. 이러한 현상은 태양 주변에 밝은 헤일로를 만들어 낸다.

첫번째 물리 기반 대기 모델\[1285]은 우주에서 지구와 지구의 대기를 single scattering을 시뮬레이션 하여 렌더링 했다. 비슷한 결과를 O'Neil.을 방식\[1333]으로 만들수 있다. 지면에서 우주로 향하는 지구 렌더링은 single-pass shader를 사용한 ray marching 으로 달성할 수 있다. 비싼 Mie와 Rayleigh scattering ray marching 적분 계산은 sky dome을 렌더링 할때 vertex단위로 계산되었다. 그리고 시각적으로 고주파를 가지는 phase function은 pixel shader에서 계산 되었다. 이것은 부드럽게 보이게 만들고, 보간으로 인해 sky geometry가 드러나는 것을 방지할 수 있습니다. 또한 scattering 값을 텍스쳐에 저장하고 여러 프레임에 걸쳐 평가를 분산시킴으로써 동일한 결과를 얻는 것도 가능하며, 성능 향상을 위해 업데이트 지연을 수용하는 방식이다\[1871].

해석적 기법은 측정된 sky radiance\[1443]나 대기 내 산란을 경로 추적으로 고비용 시뮬레이션하여 생성한 참조 이미지에 수학적 모델을 피팅하여 사용한다. 이러한 기법에서 입력 매개변수는 일반적으로 participating media material을 다룰 때보다 제한적이다. 예를 들어 turbidity Mie scattering을 유발하는 입자의 기여도를 나타내며, σs나 σt 계수를 직접 사용하는 대신 활용된다. Preetham의 모델\[1443]은 turbidity와 태양 고도를 기반으로 어떤 방향에서도 sky radiance를 평가할 수 있다. 이 모델은 이후 스펙트럼 출력 지원, 태양 주변 산란 복사휘도의 방향성 향상, 새로운 지면 반사율 입력 파라미터 추가 등을 통해 개선되었다\[778]. 해석적 하늘 모델은 평가 속도가 매우 빠르다는 장점이 있지만, 지상 시점에만 국한되어 있고, 대기 파라미터를 자유롭게 변경하여 외계 행성을 시뮬레이션하거나 예술적 목적의 특수한 시각 효과를 구현하는 데는 한계가 있다.

또다른 접근법은 지구가 heterogeneous participating media로 구성된 대기층으로 둘러쌓인 완벽한 구형임을 가정하는 것이다. 대기 조성에 관한 추가적인 설명은 Bruneton and Neyret\[203], Hillaire\[743]을 참고. 이러한 가정을 바탕으로, 현재 뷰의 고도 r,  천정 방향 대비 뷰 벡터 각도의 코사인 µv, 천정 방향 대비 태양방향 각도의 코사인 µs, 태향 방향과 뷰 벡터 간 방위각 평면에서의 각도의 코사인 v에 따라 transmittance 및 scattering을 사전 계산된 테이블에 저장할 수 있다.